
# 批次註冊學生的API 介面說明

## 1. API 路徑
**請求方法**：`POST`  
**介面地址**：`/api/student/batchregister`



## 2. 傳輸資料格式
```json
{
  "inviteCode": "225406",
  "teamName": "Team_Invite",
  "teamType": "Family",
  "emailConfirmed": true,
  "itemList": [
    {
      "sNo": "013",
      "userName": "i022013",
      "firstName": "student",
      "lastName": "022013",
      "password": "123456",
      "gender": 1,
      "birthDay": "1990-04-20",
      "email": "i022011@gmail.com",
      "phoneNumber": "13812558336"
    },
    {
      "sNo": "014",
      "userName": "i022014",
      "firstName": "student",
      "lastName": "022014",
      "password": "123456",
      "gender": 1,
      "birthDay": "1983-02-19",
      "email": "i022012@gmail.com",
      "phoneNumber": "13812558336"
    }
  ]
}
```

## 3. 欄位描述

|      欄位名      |      類型       |              描述              |
| :--------------: | :-------------: | :----------------------------: |
|   `inviteCode`   |    `string`     |             邀請碼             |
|    `teamName`    |    `string`     |            團隊名稱            |
|    `teamType`    |    `string`     |            團隊類型            |
| `emailConfirmed` |    `boolean`    | 郵箱確認狀態（`false`/`true`） |
|    `itemList`    | `array[object]` |      成員列表（物件陣列）      |
|      `sNo`       |    `string`     |              學號              |
|    `userName`    |    `string`     |             用戶名             |
|   `firstName`    |    `string`     |              名字              |
|    `lastName`    |    `string`     |              姓氏              |
|    `password`    |    `string`     |              密碼              |
|     `gender`     |    `number`     |   性別（0:未知, 1:男, 2:女）   |
|    `birthDay`    |    `string`     |   生日（格式：`YYYY-MM-DD`）   |
|     `email`      |    `string`     | 郵箱（示例：`example@qq.com`） |
|  `phoneNumber`   |    `string`     |            電話號碼            |

------

## 4. 鑑權說明

### 請求頭參數

- **`e-timestamp`**
  當前 Unix 時間戳（秒級）

- **`e-signature`**
  簽名生成規則：

  ```text
  method=post&path=/api/student/batchregister&timestamp={timestamp}&apikey={apiKey}
  ```

  1. 所有字母小寫
  2. 其中timestamp與e-timestamp參數值一致
  3. 使用 `HMAC-SHA256` 演算法以 `apiKey` 為金鑰加密

### JavaScript 示例程式碼

```javascript
// 定義 API Key
const apiKey = "sk-863b8cb0c7b24dc49299a3a7a7f8e57b";

// 生成 Unix 時間戳（秒級）
const unixTimestamp = Math.floor(Date.now() / 1000);

// 設定請求頭
apt.setRequestHeader("e-timestamp", unixTimestamp);

// 構造簽名資料
const requestData = `method=post&path=/api/student/batchregister&timestamp=${unixTimestamp}&apikey=${apiKey}`.toLowerCase();

// 計算 HMAC-SHA256 簽名
const signature = CryptoJS.HmacSHA256(
  CryptoJS.enc.Utf8.parse(requestData),
  CryptoJS.enc.Utf8.parse(apiKey)
).toString(CryptoJS.enc.Hex);

// 添加簽名請求頭
apt.setRequestHeader("e-signature", signature);
```